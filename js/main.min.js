"use strict";const MSG_ERROR={date:{invalid:"Must be a valid date",max:"The date must be in the past or today",min:""},input:{"input-day":{invalid:"Must be a valid day",max:"",min:"Must be >= 1"},"input-month":{invalid:"Must be a valid month",max:"Must be <= 12",min:"Must be >= 1"},"input-year":{invalid:"Must be a valid year",max:"Must be in the past",min:""}},required:"This field is required"},btnSubmit=(MSG_ERROR.input["input-day"].min=MSG_ERROR.input["input-day"].max=MSG_ERROR.input["input-day"].invalid,MSG_ERROR.input["input-month"].min=MSG_ERROR.input["input-month"].max=MSG_ERROR.input["input-month"].invalid,document.querySelector(".btn")),inputArr=Object.keys(MSG_ERROR.input),outputArr=["output-day","output-month","output-year"],outputData=document.body.querySelector(".output-row"),wasError={date:!1,input:!1};let inputDateMin,formDataPrev;btnSubmit.addEventListener("click",n=>{n.preventDefault();var n=n.target.form,o=[...new FormData(n).values()].join(",");if(formDataPrev!==o){formDataPrev=o;let i,r;const l=n.elements;var o=new Date,d=(o.setHours(0,0,0,0),o.getFullYear());Number(l["input-year"].max)!==d&&(l["input-year"].max=""+d),MSG_ERROR.input["input-year"].min||(MSG_ERROR.input["input-year"].min="Must be >= "+l["input-year"].min);const s=!n.checkValidity();(s||wasError.input)&&(wasError.input=s,inputArr.forEach(t=>{i=s,r="";var e=MSG_ERROR.input[t],a=l[t].validity;e.tag||(e.tag=l[t].parentNode.querySelector(".date-msg-error")),i&&(a.valueMissing?r=MSG_ERROR.required:a.rangeUnderflow?r=e.min:a.rangeOverflow?r=e.max:i=!1),i&&(e.tag.textContent=r),e.tag.hidden=!i}));let t,e,a,u;wasError.input&&!wasError.date||(r="",MSG_ERROR.date.tag||(MSG_ERROR.date.tag=l["date-field"].querySelector(":scope > .date-msg-error")),wasError.input?i=!1:(i=!0,a=Number(l["input-day"].value),e=Number(l["input-month"].value),t=Number(l["input-year"].value),n=new Date(t,e-1,a),u=n.getTime(),inputDateMin=inputDateMin||new Date(Number(l["input-year"].min),0,1),n.getDate()!=a?r=MSG_ERROR.date.invalid:u>o.getTime()?r=MSG_ERROR.date.max:u<inputDateMin.getTime()?(MSG_ERROR.date.min||(MSG_ERROR.date.min="Must be after "+inputDateMin.toLocaleDateString(navigator.language)),r=MSG_ERROR.date.min):i=!1),i&&(MSG_ERROR.date.tag.textContent=r),MSG_ERROR.date.tag.hidden=!i,wasError.date=i);var R,p,m,n=l["date-field"].classList;wasError.input||wasError.date?(n.add("date-error"),"off"!==outputData.ariaLive&&(outputData.ariaLive="off",outputArr.forEach(t=>{t=l[t];t.ariaLabel="none",t.value=t.defaultValue}))):(n.remove("date-error"),"off"===outputData.ariaLive&&(outputArr.forEach(t=>{l[t].removeAttribute("aria-label")}),outputData.ariaLive="assertive"),n=o.getDate(),m=o.getMonth(),R=new Date(d,m,0).getDate(),o=new Date(o).setFullYear(t)>=u,p=n<a,d=d-t,d+=o?0:-1,l["output-year"].value=""+d,d=(d=m-e)+(o?0:12)+(p?0:1),l["output-month"].value=""+d,m=n-a,m+=p?R:0,l["output-day"].value=""+m)}});
//# sourceMappingURL=_map/main.min.js.map